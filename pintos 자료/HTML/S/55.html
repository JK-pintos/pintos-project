<html>
<head>
<title>src/examples/insult.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/595.html'>src</a>/<a href='../files/597.html'>examples</a>/insult.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L177'>[^]</a><a href='#L348'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L177' title='Defined at 177.'>init_grammar</a>
<li><a href='#L246' title='Defined at 246.'>usage</a>
<li><a href='#L272' title='Defined at 272.'>main</a>
<li><a href='#L348' title='Defined at 348.'>expand</a>
</ol>
<hr>
<pre>
<a name='L1'>   1 <i><font color='green'>/* Insult.c</font></i>
<a name='L2'>   2 <i><font color='green'></font></i>
<a name='L3'>   3 <i><font color='green'>   This is a version of the famous CS 107 random sentence</font></i>
<a name='L4'>   4 <i><font color='green'>   generator.  I wrote a program that reads a grammar definition</font></i>
<a name='L5'>   5 <i><font color='green'>   file and writes a C file containing that grammar as hard code</font></i>
<a name='L6'>   6 <i><font color='green'>   static C strings.  Thus the majority of the code below in</font></i>
<a name='L7'>   7 <i><font color='green'>   machine generated and totally unreadable.  The arrays created</font></i>
<a name='L8'>   8 <i><font color='green'>   are specially designed to make generating the sentences as</font></i>
<a name='L9'>   9 <i><font color='green'>   easy as possible.</font></i>
<a name='L10'>  10 <i><font color='green'></font></i>
<a name='L11'>  11 <i><font color='green'>   Originally by Greg Hutchins, March 1998.</font></i>
<a name='L12'>  12 <i><font color='green'>   Modified by Ben Pfaff for Pintos, Sept 2004. */</font></i>
<a name='L13'>  13 <b>char</b> *<a href='../S/154.html#L5' title='Defined at 5 in src/threads/kernel.lds.S.'>start</a>[] =
<a name='L14'>  14   <font color='red'>{</font> "You", "1", "5", ".", "May", "13", ".", "With", "the", "19", "of", "18",
<a name='L15'>  15 ",", "may", "13", "."
<a name='L16'>  16 <font color='red'>}</font>;
<a name='L17'>  17 <b>char</b> startLoc[] = <font color='red'>{</font> 3, 0, 4, 7, 16 <font color='red'>}</font>;
<a name='L18'>  18 <b>char</b> *adj[] = <font color='red'>{</font> "3", "4", "2", ",", "1" <font color='red'>}</font>;
<a name='L19'>  19 <b>char</b> adjLoc[] = <font color='red'>{</font> 3, 0, 1, 2, 5 <font color='red'>}</font>;
<a name='L20'>  20 <b>char</b> *adj3[] = <font color='red'>{</font> "3", "4" <font color='red'>}</font>;
<a name='L21'>  21 <b>char</b> adj3Loc[] = <font color='red'>{</font> 2, 0, 1, 2 <font color='red'>}</font>;
<a name='L22'>  22 <b>char</b> *adj1[] =
<a name='L23'>  23   <font color='red'>{</font> "lame", "dried", "up", "par-broiled", "bloated", "half-baked", "spiteful",
<a name='L24'>  24 "egotistical", "ungrateful", "stupid", "moronic", "fat", "ugly", "puny", "pitiful",
<a name='L25'>  25 "insignificant", "blithering", "repulsive", "worthless", "blundering", "retarded",
<a name='L26'>  26 "useless", "obnoxious", "low-budget", "assinine", "neurotic", "subhuman", "crochety",
<a name='L27'>  27 "indescribable", "contemptible", "unspeakable", "sick", "lazy", "good-for-nothing",
<a name='L28'>  28 "slutty", "mentally-deficient", "creepy", "sloppy", "dismal", "pompous", "pathetic",
<a name='L29'>  29 "friendless", "revolting", "slovenly", "cantankerous", "uncultured", "insufferable",
<a name='L30'>  30 "gross", "unkempt", "defective", "crumby"
<a name='L31'>  31 <font color='red'>}</font>;
<a name='L32'>  32 <b>char</b> adj1Loc[] =
<a name='L33'>  33   <font color='red'>{</font> 50, 0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
<a name='L34'>  34 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42,
<a name='L35'>  35 43, 44, 45, 46, 47, 48, 49, 50, 51 <font color='red'>}</font>;
<a name='L36'>  36 <b>char</b> *adj2[] =
<a name='L37'>  37   <font color='red'>{</font> "putrefied", "festering", "funky", "moldy", "leprous", "curdled", "fetid",
<a name='L38'>  38 "slimy", "crusty", "sweaty", "damp", "deranged", "smelly", "stenchy", "malignant",
<a name='L39'>  39 "noxious", "grimy", "reeky", "nasty", "mutilated", "sloppy", "gruesome", "grisly",
<a name='L40'>  40 "sloshy", "wormy", "mealy", "spoiled", "contaminated", "rancid", "musty",
<a name='L41'>  41 "fly-covered", "moth-eaten", "decaying", "decomposed", "freeze-dried", "defective",
<a name='L42'>  42 "petrified", "rotting", "scabrous", "hirsute"
<a name='L43'>  43 <font color='red'>}</font>;
<a name='L44'>  44 <b>char</b> adj2Loc[] =
<a name='L45'>  45   <font color='red'>{</font> 40, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
<a name='L46'>  46 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40 <font color='red'>}</font>;
<a name='L47'>  47 <b>char</b> *name[] =
<a name='L48'>  48   <font color='red'>{</font> "10", ",", "bad", "excuse", "for", "6", ",", "6", "for", "brains", ",",
<a name='L49'>  49 "4", "11", "8", "for", "brains", "offspring", "of", "a", "motherless", "10", "7", "6",
<a name='L50'>  50 "7", "4", "11", "8"
<a name='L51'>  51 <font color='red'>}</font>;
<a name='L52'>  52 <b>char</b> nameLoc[] = <font color='red'>{</font> 7, 0, 1, 6, 10, 16, 21, 23, 27 <font color='red'>}</font>;
<a name='L53'>  53 <b>char</b> *stuff[] =
<a name='L54'>  54   <font color='red'>{</font> "shit", "toe", "jam", "filth", "puss", "earwax", "leaf", "clippings",
<a name='L55'>  55 "bat", "guano", "mucus", "fungus", "mung", "refuse", "earwax", "spittoon", "spittle",
<a name='L56'>  56 "phlegm"
<a name='L57'>  57 <font color='red'>}</font>;
<a name='L58'>  58 <b>char</b> stuffLoc[] = <font color='red'>{</font> 14, 0, 1, 3, 4, 5, 6, 8, 10, 11, 12, 13, 14, 15, 17, 18 <font color='red'>}</font>;
<a name='L59'>  59 <b>char</b> *noun_and_prep[] =
<a name='L60'>  60   <font color='red'>{</font> "bit", "of", "piece", "of", "vat", "of", "lump", "of", "crock", "of",
<a name='L61'>  61 "ball", "of", "tub", "of", "load", "of", "bucket", "of", "mound", "of", "glob", "of", "bag",
<a name='L62'>  62 "of", "heap", "of", "mountain", "of", "load", "of", "barrel", "of", "sack", "of", "blob", "of",
<a name='L63'>  63 "pile", "of", "truckload", "of", "vat", "of"
<a name='L64'>  64 <font color='red'>}</font>;
<a name='L65'>  65 <b>char</b> noun_and_prepLoc[] =
<a name='L66'>  66   <font color='red'>{</font> 21, 0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36,
<a name='L67'>  67 38, 40, 42 <font color='red'>}</font>;
<a name='L68'>  68 <b>char</b> *organics[] =
<a name='L69'>  69   <font color='red'>{</font> "droppings", "mung", "zits", "puckies", "tumors", "cysts", "tumors",
<a name='L70'>  70 "livers", "froth", "parts", "scabs", "guts", "entrails", "blubber", "carcuses", "gizards",
<a name='L71'>  71 "9"
<a name='L72'>  72 <font color='red'>}</font>;
<a name='L73'>  73 <b>char</b> organicsLoc[] =
<a name='L74'>  74   <font color='red'>{</font> 17, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17 <font color='red'>}</font>;
<a name='L75'>  75 <b>char</b> *body_parts[] =
<a name='L76'>  76   <font color='red'>{</font> "kidneys", "genitals", "buttocks", "earlobes", "innards", "feet"
<a name='L77'>  77 <font color='red'>}</font>;
<a name='L78'>  78 <b>char</b> body_partsLoc[] = <font color='red'>{</font> 6, 0, 1, 2, 3, 4, 5, 6 <font color='red'>}</font>;
<a name='L79'>  79 <b>char</b> *noun[] =
<a name='L80'>  80   <font color='red'>{</font> "pop", "tart", "warthog", "twinkie", "barnacle", "fondue", "pot",
<a name='L81'>  81 "cretin", "fuckwad", "moron", "ass", "neanderthal", "nincompoop", "simpleton", "11"
<a name='L82'>  82 <font color='red'>}</font>;
<a name='L83'>  83 <b>char</b> nounLoc[] = <font color='red'>{</font> 13, 0, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15 <font color='red'>}</font>;
<a name='L84'>  84 <b>char</b> *animal[] =
<a name='L85'>  85   <font color='red'>{</font> "donkey", "llama", "dingo", "lizard", "gekko", "lemur", "moose", "camel",
<a name='L86'>  86 "goat", "eel"
<a name='L87'>  87 <font color='red'>}</font>;
<a name='L88'>  88 <b>char</b> animalLoc[] = <font color='red'>{</font> 10, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 <font color='red'>}</font>;
<a name='L89'>  89 <b>char</b> *good_verb[] =
<a name='L90'>  90   <font color='red'>{</font> "love", "cuddle", "fondle", "adore", "smooch", "hug", "caress", "worship",
<a name='L91'>  91 "look", "at", "touch"
<a name='L92'>  92 <font color='red'>}</font>;
<a name='L93'>  93 <b>char</b> good_verbLoc[] = <font color='red'>{</font> 10, 0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 11 <font color='red'>}</font>;
<a name='L94'>  94 <b>char</b> *curse[] =
<a name='L95'>  95   <font color='red'>{</font> "14", "20", "23", "14", "17", "20", "23", "14", "find", "your", "9",
<a name='L96'>  96 "suddenly", "delectable", "14", "and", "14", "seek", "a", "battleground", "23"
<a name='L97'>  97 <font color='red'>}</font>;
<a name='L98'>  98 <b>char</b> curseLoc[] = <font color='red'>{</font> 4, 0, 3, 7, 13, 20 <font color='red'>}</font>;
<a name='L99'>  99 <b>char</b> *afflictors[] =
<a name='L100'> 100   <font color='red'>{</font> "15", "21", "15", "21", "15", "21", "15", "21", "a", "22", "Rush",
<a name='L101'> 101 "Limbaugh", "the", "hosts", "of", "Hades"
<a name='L102'> 102 <font color='red'>}</font>;
<a name='L103'> 103 <b>char</b> afflictorsLoc[] = <font color='red'>{</font> 6, 0, 2, 4, 6, 8, 12, 16 <font color='red'>}</font>;
<a name='L104'> 104 <b>char</b> *quantity[] =
<a name='L105'> 105   <font color='red'>{</font> "a", "4", "hoard", "of", "a", "4", "pack", "of", "a", "truckload", "of",
<a name='L106'> 106 "a", "swarm", "of", "many", "an", "army", "of", "a", "4", "heard", "of", "a", "4",
<a name='L107'> 107 "platoon", "of", "a", "4", "and", "4", "group", "of", "16"
<a name='L108'> 108 <font color='red'>}</font>;
<a name='L109'> 109 <b>char</b> quantityLoc[] = <font color='red'>{</font> 10, 0, 4, 8, 11, 14, 15, 18, 22, 26, 32, 33 <font color='red'>}</font>;
<a name='L110'> 110 <b>char</b> *numbers[] =
<a name='L111'> 111   <font color='red'>{</font> "a", "thousand", "three", "million", "ninty-nine", "nine-hundred,",
<a name='L112'> 112 "ninty-nine", "forty-two", "a", "gazillion", "sixty-eight", "times", "thirty-three"
<a name='L113'> 113 <font color='red'>}</font>;
<a name='L114'> 114 <b>char</b> numbersLoc[] = <font color='red'>{</font> 7, 0, 2, 4, 5, 7, 8, 10, 13 <font color='red'>}</font>;
<a name='L115'> 115 <b>char</b> *adv[] =
<a name='L116'> 116   <font color='red'>{</font> "viciously", "manicly", "merrily", "happily", ",", "with", "the", "19",
<a name='L117'> 117 "of", "18", ",", "gleefully", ",", "with", "much", "ritualistic", "celebration", ",",
<a name='L118'> 118 "franticly"
<a name='L119'> 119 <font color='red'>}</font>;
<a name='L120'> 120 <b>char</b> advLoc[] = <font color='red'>{</font> 8, 0, 1, 2, 3, 4, 11, 12, 18, 19 <font color='red'>}</font>;
<a name='L121'> 121 <b>char</b> *metaphor[] =
<a name='L122'> 122   <font color='red'>{</font> "an", "irate", "manticore", "Thor's", "belch", "Alah's", "fist", "16",
<a name='L123'> 123 "titans", "a", "particularly", "vicious", "she-bear", "in", "the", "midst", "of", "her",
<a name='L124'> 124 "menstrual", "cycle", "a", "pissed-off", "Jabberwock"
<a name='L125'> 125 <font color='red'>}</font>;
<a name='L126'> 126 <b>char</b> metaphorLoc[] = <font color='red'>{</font> 6, 0, 3, 5, 7, 9, 20, 23 <font color='red'>}</font>;
<a name='L127'> 127 <b>char</b> *force[] = <font color='red'>{</font> "force", "fury", "power", "rage" <font color='red'>}</font>;
<a name='L128'> 128 <b>char</b> forceLoc[] = <font color='red'>{</font> 4, 0, 1, 2, 3, 4 <font color='red'>}</font>;
<a name='L129'> 129 <b>char</b> *bad_action[] =
<a name='L130'> 130   <font color='red'>{</font> "spit", "shimmy", "slobber", "find", "refuge", "find", "shelter", "dance",
<a name='L131'> 131 "retch", "vomit", "defecate", "erect", "a", "strip", "mall", "build", "a", "26", "have", "a",
<a name='L132'> 132 "religious", "experience", "discharge", "bodily", "waste", "fart", "dance", "drool",
<a name='L133'> 133 "lambada", "spill", "16", "rusty", "tacks", "bite", "you", "sneeze", "sing", "16",
<a name='L134'> 134 "campfire", "songs", "smite", "you", "16", "times", "construct", "a", "new", "home", "throw",
<a name='L135'> 135 "a", "party", "procreate"
<a name='L136'> 136 <font color='red'>}</font>;
<a name='L137'> 137 <b>char</b> bad_actionLoc[] =
<a name='L138'> 138   <font color='red'>{</font> 25, 0, 1, 2, 3, 5, 7, 8, 9, 10, 11, 15, 18, 22, 25, 26, 27, 28, 29, 33,
<a name='L139'> 139 35, 36, 40, 44, 48, 51, 52 <font color='red'>}</font>;
<a name='L140'> 140 <b>char</b> *beasties[] =
<a name='L141'> 141   <font color='red'>{</font> "yaks", "22", "maggots", "22", "cockroaches", "stinging", "scorpions",
<a name='L142'> 142 "fleas", "22", "weasels", "22", "gnats", "South", "American", "killer", "bees", "spiders",
<a name='L143'> 143 "4", "monkeys", "22", "wiener-dogs", "22", "rats", "22", "wolverines", "4", ",", "22",
<a name='L144'> 144 "pit-fiends"
<a name='L145'> 145 <font color='red'>}</font>;
<a name='L146'> 146 <b>char</b> beastiesLoc[] =
<a name='L147'> 147   <font color='red'>{</font> 14, 0, 1, 3, 5, 7, 8, 10, 12, 16, 17, 19, 21, 23, 25, 29 <font color='red'>}</font>;
<a name='L148'> 148 <b>char</b> *<a href='../S/155.html#L34' title='Defined at 34 in src/threads/synch.h.'>condition</a>[] =
<a name='L149'> 149   <font color='red'>{</font> "frothing", "manic", "crazed", "plague-ridden", "disease-carrying",
<a name='L150'> 150 "biting", "rabid", "blood-thirsty", "ravaging", "slavering"
<a name='L151'> 151 <font color='red'>}</font>;
<a name='L152'> 152 <b>char</b> conditionLoc[] = <font color='red'>{</font> 10, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 <font color='red'>}</font>;
<a name='L153'> 153 <b>char</b> *place[] =
<a name='L154'> 154   <font color='red'>{</font> "in", "24", "25", "upon", "your", "mother's", "grave", "on", "24", "best",
<a name='L155'> 155 "rug", "in", "the", "26", "you", "call", "home", "upon", "your", "heinie"
<a name='L156'> 156 <font color='red'>}</font>;
<a name='L157'> 157 <b>char</b> placeLoc[] = <font color='red'>{</font> 5, 0, 3, 7, 11, 17, 20 <font color='red'>}</font>;
<a name='L158'> 158 <b>char</b> *relation[] =
<a name='L159'> 159   <font color='red'>{</font> "your", "your", "your", "your", "father's", "your", "mother's", "your",
<a name='L160'> 160 "grandma's"
<a name='L161'> 161 <font color='red'>}</font>;
<a name='L162'> 162 <b>char</b> relationLoc[] = <font color='red'>{</font> 6, 0, 1, 2, 3, 5, 7, 9 <font color='red'>}</font>;
<a name='L163'> 163 <b>char</b> *in_something[] =
<a name='L164'> 164   <font color='red'>{</font> "entrails", "anal", "cavity", "shoes", "house", "pantry", "general",
<a name='L165'> 165 "direction", "pants", "bed"
<a name='L166'> 166 <font color='red'>}</font>;
<a name='L167'> 167 <b>char</b> in_somethingLoc[] = <font color='red'>{</font> 8, 0, 1, 3, 4, 5, 6, 8, 9, 10 <font color='red'>}</font>;
<a name='L168'> 168 <b>char</b> *bad_place[] =
<a name='L169'> 169   <font color='red'>{</font> "rat", "hole", "sewer", "toxic", "dump", "oil", "refinery", "landfill",
<a name='L170'> 170 "porto-pottie"
<a name='L171'> 171 <font color='red'>}</font>;
<a name='L172'> 172 <b>char</b> bad_placeLoc[] = <font color='red'>{</font> 6, 0, 2, 3, 5, 7, 8, 9 <font color='red'>}</font>;
<a name='L173'> 173 <b>char</b> **daGrammar[27];
<a name='L174'> 174 <b>char</b> *daGLoc[27];
<a name='L175'> 175 
<a name='L176'> 176 <b>static</b> <b>void</b>
<a name='L177'> 177 <a href='../S/55.html#L329' title='Refered from 329 in src/examples/insult.c.'>init_grammar</a> (<b>void</b>)
<a name='L178'> 178 <font color='red'>{</font>
<a name='L179'> 179   daGrammar[0] = <a href='../S/154.html#L5' title='Defined at 5 in src/threads/kernel.lds.S.'>start</a>;
<a name='L180'> 180   daGLoc[0] = startLoc;
<a name='L181'> 181   daGrammar[1] = adj;
<a name='L182'> 182   daGLoc[1] = adjLoc;
<a name='L183'> 183   daGrammar[2] = adj3;
<a name='L184'> 184   daGLoc[2] = adj3Loc;
<a name='L185'> 185   daGrammar[3] = adj1;
<a name='L186'> 186   daGLoc[3] = adj1Loc;
<a name='L187'> 187   daGrammar[4] = adj2;
<a name='L188'> 188   daGLoc[4] = adj2Loc;
<a name='L189'> 189   daGrammar[5] = name;
<a name='L190'> 190   daGLoc[5] = nameLoc;
<a name='L191'> 191   daGrammar[6] = stuff;
<a name='L192'> 192   daGLoc[6] = stuffLoc;
<a name='L193'> 193   daGrammar[7] = noun_and_prep;
<a name='L194'> 194   daGLoc[7] = noun_and_prepLoc;
<a name='L195'> 195   daGrammar[8] = organics;
<a name='L196'> 196   daGLoc[8] = organicsLoc;
<a name='L197'> 197   daGrammar[9] = body_parts;
<a name='L198'> 198   daGLoc[9] = body_partsLoc;
<a name='L199'> 199   daGrammar[10] = noun;
<a name='L200'> 200   daGLoc[10] = nounLoc;
<a name='L201'> 201   daGrammar[11] = animal;
<a name='L202'> 202   daGLoc[11] = animalLoc;
<a name='L203'> 203   daGrammar[12] = good_verb;
<a name='L204'> 204   daGLoc[12] = good_verbLoc;
<a name='L205'> 205   daGrammar[13] = curse;
<a name='L206'> 206   daGLoc[13] = curseLoc;
<a name='L207'> 207   daGrammar[14] = afflictors;
<a name='L208'> 208   daGLoc[14] = afflictorsLoc;
<a name='L209'> 209   daGrammar[15] = quantity;
<a name='L210'> 210   daGLoc[15] = quantityLoc;
<a name='L211'> 211   daGrammar[16] = numbers;
<a name='L212'> 212   daGLoc[16] = numbersLoc;
<a name='L213'> 213   daGrammar[17] = adv;
<a name='L214'> 214   daGLoc[17] = advLoc;
<a name='L215'> 215   daGrammar[18] = metaphor;
<a name='L216'> 216   daGLoc[18] = metaphorLoc;
<a name='L217'> 217   daGrammar[19] = force;
<a name='L218'> 218   daGLoc[19] = forceLoc;
<a name='L219'> 219   daGrammar[20] = bad_action;
<a name='L220'> 220   daGLoc[20] = bad_actionLoc;
<a name='L221'> 221   daGrammar[21] = beasties;
<a name='L222'> 222   daGLoc[21] = beastiesLoc;
<a name='L223'> 223   daGrammar[22] = <a href='../S/155.html#L34' title='Defined at 34 in src/threads/synch.h.'>condition</a>;
<a name='L224'> 224   daGLoc[22] = conditionLoc;
<a name='L225'> 225   daGrammar[23] = place;
<a name='L226'> 226   daGLoc[23] = placeLoc;
<a name='L227'> 227   daGrammar[24] = relation;
<a name='L228'> 228   daGLoc[24] = relationLoc;
<a name='L229'> 229   daGrammar[25] = in_something;
<a name='L230'> 230   daGLoc[25] = in_somethingLoc;
<a name='L231'> 231   daGrammar[26] = bad_place;
<a name='L232'> 232   daGLoc[26] = bad_placeLoc;
<a name='L233'> 233 <font color='red'>}</font>
<a name='L234'> 234 
<a name='L235'> 235 <font color='darkred'>#include</font> &lt;<a href='93.html'>ctype.h</a>&gt;
<a name='L236'> 236 <font color='darkred'>#include</font> &lt;<a href='104.html'>debug.h</a>&gt;
<a name='L237'> 237 <font color='darkred'>#include</font> &lt;<a href='102.html'>random.h</a>&gt;
<a name='L238'> 238 <font color='darkred'>#include</font> &lt;<a href='../I/72.html'>stdio.h</a>&gt;
<a name='L239'> 239 <font color='darkred'>#include</font> &lt;<a href='101.html'>stdlib.h</a>&gt;
<a name='L240'> 240 <font color='darkred'>#include</font> &lt;<a href='82.html'>string.h</a>&gt;
<a name='L241'> 241 <font color='darkred'>#include</font> &lt;<a href='../I/94.html'>syscall.h</a>&gt;
<a name='L242'> 242 
<a name='L243'> 243 <b>void</b> <a href='../S/55.html#L348' title='Defined at 348 in src/examples/insult.c.'>expand</a> (<b>int</b> num, <b>char</b> **grammar[], <b>char</b> *location[], <b>int</b> handle);
<a name='L244'> 244 
<a name='L245'> 245 <b>static</b> <b>void</b>
<a name='L246'> 246 <a href='../R/943.html' title='Multiple refered from 13 places.'>usage</a> (<b>int</b> ret_code, <b>const</b> <b>char</b> *message, ...) <a href='../S/104.html#L10' title='Defined at 10 in src/lib/debug.h.'>PRINTF_FORMAT</a> (2, 3);
<a name='L247'> 247 
<a name='L248'> 248 <b>static</b> <b>void</b>
<a name='L249'> 249 usage (<b>int</b> ret_code, <b>const</b> <b>char</b> *message, ...)
<a name='L250'> 250 <font color='red'>{</font>
<a name='L251'> 251   <a href='../S/80.html#L7' title='Defined at 7 in src/lib/stdarg.h.'>va_list</a> args;
<a name='L252'> 252 
<a name='L253'> 253   <b>if</b> (message != <a href='../S/92.html#L4' title='Defined at 4 in src/lib/stddef.h.'>NULL</a>) 
<a name='L254'> 254     <font color='red'>{</font>
<a name='L255'> 255       <a href='../S/80.html#L9' title='Defined at 9 in src/lib/stdarg.h.'>va_start</a> (args, message);
<a name='L256'> 256       <a href='../D/1079.html' title='Multiple defined in 2 places.'>vprintf</a> (message, args);
<a name='L257'> 257       <a href='../S/80.html#L10' title='Defined at 10 in src/lib/stdarg.h.'>va_end</a> (args);
<a name='L258'> 258     <font color='red'>}</font>
<a name='L259'> 259   
<a name='L260'> 260   <a href='../S/115.html#L79' title='Defined at 79 in src/lib/stdio.c.'>printf</a> ("\n"
<a name='L261'> 261           "Usage: insult [OPTION]...\n"
<a name='L262'> 262           "Prints random insults to screen.\n\n"
<a name='L263'> 263           "  -h:               this help message\n"
<a name='L264'> 264           "  -s &lt;integer&gt;:     set the random seed (default 4951)\n"
<a name='L265'> 265           "  -n &lt;integer&gt;:     choose number of insults (default 4)\n"
<a name='L266'> 266           "  -f &lt;file&gt;:        redirect output to &lt;file&gt;\n");
<a name='L267'> 267 
<a name='L268'> 268   <a href='../S/97.html#L72' title='Defined at 72 in src/lib/user/syscall.c.'>exit</a> (ret_code);
<a name='L269'> 269 <font color='red'>}</font>
<a name='L270'> 270 
<a name='L271'> 271 <b>int</b>
<a name='L272'> 272 <a href='../R/639.html' title='Multiple refered from 2 places.'>main</a> (<b>int</b> argc, <b>char</b> *argv[])
<a name='L273'> 273 <font color='red'>{</font>
<a name='L274'> 274   <b>int</b> sentence_cnt, new_seed, i, file_flag, sent_flag, seed_flag;
<a name='L275'> 275   <b>int</b> handle;
<a name='L276'> 276   
<a name='L277'> 277   new_seed = 4951;
<a name='L278'> 278   sentence_cnt = 4;
<a name='L279'> 279   file_flag = 0;
<a name='L280'> 280   seed_flag = 0;
<a name='L281'> 281   sent_flag = 0;
<a name='L282'> 282   handle = <a href='../S/84.html#L16' title='Defined at 16 in src/lib/stdio.h.'>STDOUT_FILENO</a>;
<a name='L283'> 283 
<a name='L284'> 284   <b>for</b> (i = 1; i &lt; argc; i++)
<a name='L285'> 285     <font color='red'>{</font>
<a name='L286'> 286       <b>if</b> (<a href='../S/83.html#L73' title='Defined at 73 in src/lib/string.c.'>strcmp</a> (argv[1], "-h") == 0)
<a name='L287'> 287         <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (0, <a href='../S/92.html#L4' title='Defined at 4 in src/lib/stddef.h.'>NULL</a>);
<a name='L288'> 288       <b>else</b> <b>if</b> (<a href='../S/83.html#L73' title='Defined at 73 in src/lib/string.c.'>strcmp</a> (argv[i], "-s") == 0)
<a name='L289'> 289         <font color='red'>{</font>
<a name='L290'> 290           <b>if</b> (seed_flag++)
<a name='L291'> 291             <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (-1, "Can't have more than one seed");
<a name='L292'> 292           <b>if</b> (++i &gt;= argc)
<a name='L293'> 293             <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (-1, "Missing value for -s");
<a name='L294'> 294           new_seed = <a href='../S/103.html#L10' title='Defined at 10 in src/lib/stdlib.c.'>atoi</a> (argv[i]);
<a name='L295'> 295         <font color='red'>}</font>
<a name='L296'> 296       <b>else</b> <b>if</b> (<a href='../S/83.html#L73' title='Defined at 73 in src/lib/string.c.'>strcmp</a> (argv[i], "-n") == 0)
<a name='L297'> 297         <font color='red'>{</font>
<a name='L298'> 298           <b>if</b> (sent_flag++)
<a name='L299'> 299             <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (-1, "Can't have more than one sentence option");
<a name='L300'> 300           <b>if</b> (++i &gt;= argc)
<a name='L301'> 301             <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (-1, "Missing value for -n");
<a name='L302'> 302           sentence_cnt = <a href='../S/103.html#L10' title='Defined at 10 in src/lib/stdlib.c.'>atoi</a> (argv[i]);
<a name='L303'> 303           <b>if</b> (sentence_cnt &lt; 1)
<a name='L304'> 304             <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (-1, "Must have at least one sentence");
<a name='L305'> 305         <font color='red'>}</font>
<a name='L306'> 306       <b>else</b> <b>if</b> (<a href='../S/83.html#L73' title='Defined at 73 in src/lib/string.c.'>strcmp</a> (argv[i], "-f") == 0)
<a name='L307'> 307         <font color='red'>{</font>
<a name='L308'> 308           <b>if</b> (file_flag++)
<a name='L309'> 309             <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (-1, "Can't have more than one output file");
<a name='L310'> 310           <b>if</b> (++i &gt;= argc)
<a name='L311'> 311             <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (-1, "Missing value for -f");
<a name='L312'> 312 
<a name='L313'> 313           <i><font color='green'>/* Because files have fixed length in the basic Pintos</font></i>
<a name='L314'> 314 <i><font color='green'>             file system, the 0 argument means that this option</font></i>
<a name='L315'> 315 <i><font color='green'>             will not be useful until project 4 is</font></i>
<a name='L316'> 316 <i><font color='green'>             implemented. */</font></i>
<a name='L317'> 317           <a href='../S/97.html#L91' title='Defined at 91 in src/lib/user/syscall.c.'>create</a> (argv[i], 0);
<a name='L318'> 318           handle = <a href='../S/97.html#L103' title='Defined at 103 in src/lib/user/syscall.c.'>open</a> (argv[i]);
<a name='L319'> 319           <b>if</b> (handle &lt; 0)
<a name='L320'> 320             <font color='red'>{</font>
<a name='L321'> 321               <a href='../S/115.html#L79' title='Defined at 79 in src/lib/stdio.c.'>printf</a> ("%s: open failed\n", argv[i]);
<a name='L322'> 322               <b>return</b> <a href='../S/100.html#L20' title='Defined at 20 in src/lib/user/syscall.h.'>EXIT_FAILURE</a>;
<a name='L323'> 323             <font color='red'>}</font>
<a name='L324'> 324         <font color='red'>}</font>
<a name='L325'> 325       <b>else</b>
<a name='L326'> 326         <a href='../D/1057.html' title='Multiple defined in 3 places.'>usage</a> (-1, "Unrecognized flag");
<a name='L327'> 327     <font color='red'>}</font>
<a name='L328'> 328 
<a name='L329'> 329   <a href='../S/55.html#L177' title='Defined at 177 in src/examples/insult.c.'>init_grammar</a> ();
<a name='L330'> 330 
<a name='L331'> 331   <a href='../S/85.html#L34' title='Defined at 34 in src/lib/random.c.'>random_init</a> (new_seed);
<a name='L332'> 332   <a href='../S/94.html#L16' title='Defined at 16 in src/lib/user/console.c.'>hprintf</a> (handle, "\n");
<a name='L333'> 333 
<a name='L334'> 334   <b>for</b> (i = 0; i &lt; sentence_cnt; i++)
<a name='L335'> 335     <font color='red'>{</font>
<a name='L336'> 336       <a href='../S/94.html#L16' title='Defined at 16 in src/lib/user/console.c.'>hprintf</a> (handle, "\n");
<a name='L337'> 337       <a href='../S/55.html#L348' title='Defined at 348 in src/examples/insult.c.'>expand</a> (0, daGrammar, daGLoc, handle);
<a name='L338'> 338       <a href='../S/94.html#L16' title='Defined at 16 in src/lib/user/console.c.'>hprintf</a> (handle, "\n\n");
<a name='L339'> 339     <font color='red'>}</font>
<a name='L340'> 340   
<a name='L341'> 341   <b>if</b> (file_flag)
<a name='L342'> 342     <a href='../S/97.html#L139' title='Defined at 139 in src/lib/user/syscall.c.'>close</a> (handle);
<a name='L343'> 343 
<a name='L344'> 344   <b>return</b> <a href='../S/100.html#L19' title='Defined at 19 in src/lib/user/syscall.h.'>EXIT_SUCCESS</a>;
<a name='L345'> 345 <font color='red'>}</font>
<a name='L346'> 346 
<a name='L347'> 347 <b>void</b>
<a name='L348'> 348 <a href='../R/423.html' title='Multiple refered from 3 places.'>expand</a> (<b>int</b> num, <b>char</b> **grammar[], <b>char</b> *location[], <b>int</b> handle)
<a name='L349'> 349 <font color='red'>{</font>
<a name='L350'> 350   <b>char</b> *word;
<a name='L351'> 351   <b>int</b> i, which, listStart, listEnd;
<a name='L352'> 352 
<a name='L353'> 353   which = <a href='../S/85.html#L78' title='Defined at 78 in src/lib/random.c.'>random_ulong</a> () % location[num][0] + 1;
<a name='L354'> 354   listStart = location[num][which];
<a name='L355'> 355   listEnd = location[num][which + 1];
<a name='L356'> 356   <b>for</b> (i = listStart; i &lt; listEnd; i++)
<a name='L357'> 357     <font color='red'>{</font>
<a name='L358'> 358       word = grammar[num][i];
<a name='L359'> 359       <b>if</b> (!<a href='../S/93.html#L7' title='Defined at 7 in src/lib/ctype.h.'>isdigit</a> (*word))
<a name='L360'> 360         <font color='red'>{</font>
<a name='L361'> 361           <b>if</b> (!<a href='../S/93.html#L21' title='Defined at 21 in src/lib/ctype.h.'>ispunct</a> (*word))
<a name='L362'> 362             <a href='../S/94.html#L16' title='Defined at 16 in src/lib/user/console.c.'>hprintf</a> (handle, " ");
<a name='L363'> 363           <a href='../S/94.html#L16' title='Defined at 16 in src/lib/user/console.c.'>hprintf</a> (handle, "%s", word);
<a name='L364'> 364         <font color='red'>}</font>
<a name='L365'> 365       <b>else</b>
<a name='L366'> 366         <a href='../S/55.html#L348' title='Defined at 348 in src/examples/insult.c.'>expand</a> (<a href='../S/103.html#L10' title='Defined at 10 in src/lib/stdlib.c.'>atoi</a> (word), grammar, location, handle);
<a name='L367'> 367     <font color='red'>}</font>
<a name='L368'> 368 
<a name='L369'> 369 <font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L177'>[^]</a><a href='#L348'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
